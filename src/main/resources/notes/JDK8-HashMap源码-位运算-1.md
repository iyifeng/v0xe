```
在学习HashMap源码之前，先了解一下位运算，因为它的很多操作都用到了位运算中的奇淫技巧。位运算，说白了，就是直接在二进数上进行各种逻辑操作。以下操作以整型int为例，对应32位bit，如无特别说明，省略了前28位0
```

### java中常用的的位运算符

1. 一元操作符

   ```java
   位非( ~ )
   ```

   **取反**是一元运算符，对一个二进制数的每一位执行逻辑[反]操作。使数字1成为0，0成为1。例如：

   ```java
      NOT 0111（十进制7）
        = 1000（十进制8）
   ```

2. 二元操作符

   ```
   位与( & )
   位或( | )
   位异或( ^ )
   ```

   **按位与**处理两个长度相同的二进制数，两个相应的二进位都为1，该位的结果值才为1，否则为0。例如：

   ```
            0101
        &	 0011
          = 0001
   ```

   **按位或**处理两个长度相同的二进制数，两个相应的二进位中只要有一个为1，该位的结果值为1。例如

   ```
           0101（十进制5）
        |  0011（十进制3）
         = 0111（十进制7）
   ```

   **按位异或**运算，对等长二进制模式按位或二进制数的每一位执行逻辑异按位或操作。操作的结果是如果某位不同则该位为1，否则该位为0。例如

   ```
            0101
        ^   0011
          = 0110
   ```

3. 移位操作符

   **移位**是一个二元运算符，用来将一个二进制数中的每一位全部都向一个方向移动指定位，溢出的部分将被舍弃，而空缺的部分填入一定的值。

   ```
   左移( << )
   右移( >> )
   ```

   应用逻辑移位时，移位后空缺的部分全部填0。

   **左移**

   ```
          0001（十进制1）
    <<       3（左移3位）
        = 1000（十进制8）
   
   ```

   **右移**

   ```
          1010（十进制10）
    >>       2（右移2位）
        = 0010（十进制2）
   ```

4. 无符号右移

   ```
   无符号右移( >>> )
   ```

   ```
          1010（十进制10）
    >>>      2（右移2位）
        = 0010（十进制2）
   ```

   ```
          1000 0000 0000 0000 0000 0000 0000 1010（十进制-1）
    >>>      2（右移2位）
        = 0010 0000 0000 0000 0000 0000 0000 1010（十进制1073741823）
   ```


### HashMap中用到的位运算技巧

1. 整型数据二进制高十六位与低16位异或**（^）**

   ```
   h ^ (h >>> 16)
   ```

2. 获取大于变量cap的2的最小幂

   ```
   int n = cap - 1;
           n |= n >>> 1;
           n |= n >>> 2;
           n |= n >>> 4;
           n |= n >>> 8;
           n |= n >>> 16;
   ```
